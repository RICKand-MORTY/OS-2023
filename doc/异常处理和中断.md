异常处理

trap init():将异常向量表设置到stvec寄存器然后屏蔽所有中断

entry.S:

do_exception_vector: 用于上下文现场保存

ret_from_exception: 上下文恢复

trap.c:

error_msg[]：每一个元素代表一种异常

do_exception()：处理函数入口，根据scause值判断异常和中断

do_trap_error():  异常处理函数,调用show_regs函数输出所有寄存器值


异常处理流程:

异常到达->do_exception_vector->do_exception()->do_trap_error()


中断处理流程:

中断到达->do_exception_vector->do_exception()->中断处理程序

handle_timer()：S模式下定时器中断处理函数